# PrefChart コンポーネントテスト仕様書

## コンポーネントの概要
PrefChartは都道府県の人口データをグラフ表示するコンポーネントです。Highchartsを使用してグラフを描画し、embla-carouselを使用して人口区分（総人口、年少人口、生産年齢人口、老年人口）を切り替える機能を提供します。

## テスト項目

### 1. コンポーネントの初期表示

#### 1.1 基本レイアウト
- [ ] グラフコンテナが表示されること
- [ ] カルーセルが表示されること
- [ ] 前後のナビゲーションボタンが表示されること

#### 1.2 初期状態
- [ ] グラフが空の状態で表示されること
- [ ] カルーセルの初期位置が「総人口」であること
- [ ] 「前へ」ボタンが無効化されていること

### 2. グラフ機能

#### 2.1 データ表示
- [ ] 都道府県を選択すると対応するデータがグラフに表示されること
- [ ] 複数の都道府県を選択した場合、すべてのデータが正しく表示されること
- [ ] 各都道府県のデータが適切な色で表示されること

#### 2.2 グラフの更新
- [ ] 都道府県の選択/解除でグラフが更新されること
- [ ] データ取得中は適切なローディング表示がされること
- [ ] エラー発生時に適切なエラー表示がされること

#### 2.3 レスポンシブ対応
- [ ] ウィンドウリサイズ時にグラフサイズが適切に調整されること
- [ ] モバイル表示時に適切なレイアウトに変更されること

### 3. カルーセル機能

#### 3.1 ナビゲーション
- [ ] 「次へ」ボタンクリックで次の人口区分に移動すること
- [ ] 「前へ」ボタンクリックで前の人口区分に移動すること
- [ ] 最初の位置で「前へ」ボタンが無効化されること
- [ ] 最後の位置で「次へ」ボタンが無効化されること

#### 3.2 データ切り替え
- [ ] カルーセル移動時に対応する人口区分のデータが表示されること
- [ ] データ切り替え時にグラフがスムーズに更新されること

### 4. データ管理

#### 4.1 データ取得
- [ ] 都道府県コードを指定して正しくデータが取得できること
- [ ] 複数の都道府県データを並行して取得できること
- [ ] データ取得に失敗した場合、適切なエラーハンドリングがされること

#### 4.2 データ更新
- [ ] 新しい都道府県が選択された時、シリーズデータが正しく更新されること
- [ ] 都道府県が解除された時、対応するシリーズが削除されること

## テスト環境

### 必要なモック
- [ ] usePrefectureStore
- [ ] Highcharts
- [ ] embla-carousel-vue

### テストデータ
- [ ] 複数都道府県の人口データ
- [ ] 各人口区分（総人口、年少人口、生産年齢人口、老年人口）のデータ
- [ ] エラーケース用のデータ

## 特記事項
- コンポーネントはclient-onlyで囲まれているため、SSRでの動作は考慮しない
- ブラウザのリサイズイベントのテストには、適切なイベントシミュレーションが必要
- カルーセルのスワイプ操作のテストには、タッチイベントのシミュレーションが必要